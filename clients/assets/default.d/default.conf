server {
    listen 80;
    server_name static.evolutionedu.cl;

    root /var/www/public;
    index index.html;

    location / {

        if ($http_origin ~* "^https://(evolutionedu\.cl|preview\.bithosting\.cl)$") {
            add_header Access-Control-Allow-Origin $http_origin always;
            add_header Vary Origin;
        }

        if ($request_method = OPTIONS) {
            if ($http_origin ~* "^https://(evolutionedu\.cl|preview\.bithosting\.cl)$") {
                add_header Access-Control-Allow-Origin $http_origin always;
                add_header Vary Origin;
            }

            add_header Access-Control-Allow-Methods "GET, OPTIONS";
            add_header Access-Control-Allow-Headers "Content-Type, Authorization";
            add_header Content-Length 0;
            return 204;
        }

        try_files $uri $uri/ =404;
    }
}
